下午好，我是李雨轩。
欢迎来到第二次ICS实验课，本次tutorial由两部分构成，分别是Shell和Gdb调试器，
其中Shell的相关部分由我来讲解，Gdb调试器的相关部分由唐堂助教来讲解。

开始之前需要说面的一些事情是，无论是Shell还是Gdb调试器，都是非常庞大的主题，
所以在有限时间内我们无法做到一个step by step的讲解，因此本次tutorial的目的是让大家对Shell和Gdb调试器有一个初步的认识，
并且认识到他们的重要性，真正想要通过这两个工具提升效率还需要大家进一步学习，本次课程的主要希望起到一个引导的作用。
当然，因此如果你已经是一个Shell和Gdb的熟练使用者，那么——feel free to absent.


好的，首先是Shell部分。

本次tutorial主要相从以下几个方面来讲解Shell：
首先最本的是认识shell，以及shell的基本操作；
接下来会展示一写shell的一些使用或者fancy的工具;
最后会进一步的讨论如何使用shell script来提升工作效率，自动化的完成一些操作。
在tutorial的进行中，我也会穿插这一句互联网的黑话，RTFM, 并简单的带领大家试着去阅读手册，这也是一个很重要的技能。



OK,我们进入主题。
如今计算机有着多种多样的交互接口让我们与之进行交互，有图形界面、命令行界面、语音输入甚至AV、VR等等，
对于大家少则几年多则十几年的计算机使用经验，图形界面应该是最为熟悉的，
大家已经习惯了在vscode或者一些IDE中编写代码，然后通过鼠标点击按钮来进行编译、运行、调试等操作，
也习惯了在通过alt+tab来切换不同的窗口，通过鼠标和键盘来进行复制粘贴等操作。
不可否认的是，图形界面确实提供一个很直观的交互界面，并且在90%的场景下都可以满足我们的需求。
然而，但是它们也从根本上限制了您的操作方式。我不能点击一个不存在的按纽，也很难将两个应用程序连接在一起使用。
所以为了充分利用计算机的能力，我们不得不回到与计算机交互的最基本的方式——命令行界面CLI。


当然，课程的目的不是让大家放弃图形界面，而是让大家认识到命令行界面具有的优势，
展示CLI的许多场景下的的高效，以及灵活性和可组合使用的优势。
以便在之后的某一天里，当你发现你要做的事情在图形界面下很难完成时，或者你所工作的环境压根不存在图形化界面时，
大家能够具有选择使用命令行界面来完成的能力。


# Basic Setup

那么说了这么多首先是basic setup, 想要使用CLI界面与计算机进行交互，首先需要一个terminal，
确切来讲是terminal emulator，这个东西是一个运行在图形界面下的程序，它模拟了一个传统的终端，
毕竟2025年了，大家应该很难有一个真正的终端了。
在Linux下，大家可以使用gnome-terminal, konsole, xterm等等，windows下也有Windows Terminal供大家使用。

或者大家也可以ssh到远程的linux服务器上，关于ssh在第一次实验课上已经讲解过了，这里就不再赘述了。

当然，如果大家手上有运行某个linux发行版的电脑，那么可以尝试按下ctrl+alt+f1~f6来进入一个virtual console，
这个console是一个真正的终端，没有图形界面，只有一个光标在黑屏上闪烁，这个时候你就可以输入你的用户名和密码来登录系统了。

现在就会进入了一个真正的CLI界面，这个时候你会发现有一个提示符跟着一个闪烁的光标，等待你的输入。

# Shell

这一切完成后，我们就可以开始使用shell了。
Shell是一个运行在CLI环境下的程序，它是用户与操作系统内核之间的接口，
用户通过shell来向操作系统内核发送命令，内核接收到命令后执行相应的操作并返回结果给用户。

几乎所有您能够接触到的平台都支持某种形式的 shell，有些甚至还提供了多种 shell 供您选择。
在Linux系统中，常见的shell有bash, zsh, sh等等，而在windows系统中，常见的shell有cmd, powershell等等。
作为计算机的学生，我们肯定是以linux系统为主，并且本节课我们会以Bourne Again Shell(bash)为例来讲解。
这是被最广泛使用的一种 shell，它的语法和其他的 shell 都是类似的，他们中的很大一部分而都是POSIX shell compatible的。

当你打开终端时，你会看到一个提示符，这是 shell 最主要的文本接口，它告诉你 shell 正在等待你输入命令。
命令最终会被 shell 解析。最简单的命令是执行一个程序，你可以选择指定路径，或者他会在 PATH 环境变量中查找。(PATH)

shell1的命令格式通常是命令名+参数，参数之间用空格分隔，命令和参数之间用空格分隔。
例如，ls -l /home/lyx，其中ls是命令名，-l和/home/lyx是参数。（相对路径）



在命令行环境下有着大量的命令，这些命令可以帮助我们完成各种各样的任务，例如查看文件内容，创建文件，删除文件，查看进程等等。
举例子。



我们可以发现，其实CLI界面的shell和图形界面的操作是一样的，我们都可以创建、管理文件、可以启动程序，在GUI下通过双击图标启动程序，
相比于GUI,CLI还可以在程序进入死循环时通过ctrl+c来终止程序，但是GUI下就不太好操作了，你或许需要打开任务管理器来终止程序。

在shell中同样有前后台的概念，我们可以通过&符号来让程序在后台运行，通过fg命令来将程序调回前台。
jobs命令可以查看当前有哪些程序在后台运行，kill命令可以终止一个进程。
此外，ctrl+z可以将一个程序挂起，bg命令可以将一个程序放到后台运行，fg命令可以将一个程序调回前台运行。

shell还有许多其他功能，我们稍后解释。

此外还有tar命令，可以用来打包文件

还有find命令，可以用来查找文件甚至可以用来执行一些操作

还有grep命令，可以用来查找文件中的某些内容，他支持正则表达式

还有awk命令，可以用来处理文本文件

还有sed命令，可以用来编辑文本文件

除此之外还有许多实用的小工具，比如ag, fzf, ads, tmux。


上面介绍的一些命令或者工具有时你会发现在你的系统上并没有安装，这是因为有些命令或者工具并不是所有的linux发行版都默认安装的，
或者还没有被管理员安装，这个时候你可以通过包管理器来安装这些工具，包管理器是一个用来安装、卸载、更新软件包的工具，
在不同的linux发行版上有不同的包管理器，比如apt, yum, pacman等等，你可以通过包管理器来安装你需要的工具。

或者，你也可以通过源码安装，这个时候你需要下载源码，然后解压，然后进入解压后的目录，然后执行./configure, make, make install来安装。

当然，你也可以通过docker来运行一个linux容器，这个时候你就可以在容器中安装你需要的工具，而不会影响到你的主机系统。


 因为课程实验所迫, 你不得不使用Linux, 不得不使用十分落后的命令行。
你边尝试新的命令, 就这样探索着这个陌生的世界。
有些时候你或许会遇到invalid command, invalid option, invalid argument等等错误，

然后你知道了，这个时候你需要RTFM，你需要去阅读手册，去使用man这样一个命令来查看命令的手册
于是在命令行输入 man 然后敲了回车，只见屏幕上输出了一行信息: What manual page do you want?
...


回到正题，上面的展示的都是shell可以帮组我们执行一些命令，然是实际上shell还有一个很重要的功能，就是pipe和重定向。

pipe实际上是操作系统中提到的一种IPC(Inter-Process Communication)方式，大家在操作系统课程中应该学过，
通俗来说，他可以将一个程序的输出作为另一个程序的输入，这样就可以将多个程序连接在一起使用，实现更复杂的功能。
图很好的展示的了一点。比如我们可以通过ls | wc -l来统计当前目录下有多少个文件。

重定向则是将一个程序的输出重定向到一个文件中，或者将一个文件的内容重定向到一个程序中。
比如我们可以通过ls > file.txt来将ls的输出重定向到file.txt中，通过cat < file.txt来将file.txt的内容输出到屏幕上。

好我们现在有一个文件（stdout+stderr），如果我们执行>, 会发现stderr的内容并没有被重定向到文件中，
这里就涉及到了一个概念，stdout和stderr，stdout是标准输出，stderr是标准错误输出，
他们的区别在于stdout是用来输出正常的程序输出，而stderr是用来输出错误信息的，这样做的好处是可以将正常的输出和错误的输出分开，
如果我们希望将stderr的内容也重定向到文件中，我们可以通过2>&1来实现，这个命令的意思是将stderr重定向到stdout中，

当然，我们也可以通过&>来将stdout和stderr都重定向到一个文件中。（/dev/null）




上面我们展示了一些shell的基本功能，单独来看每一个功能都是很简单的，但是当我们将他们组合在一起使用时，就可以实现很多复杂的功能，
而pipe和重定向就是这样的一个作用，此外还有$()用来结果替换，<()用来将命令执行结果作为一个文件使用










